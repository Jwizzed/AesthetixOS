# API Documentation

## Overview
AesthetixOS provides a RESTful API built with Django Rest Framework.

## Base URL
`http://localhost:8000/api/v1/`

## Authentication
All endpoints require `Authorization: Token <your_token>` header unless specified otherwise.

---

## Endpoints

### 1. Clinic (`/clinic`)
**Managed by:** `backend-core/clinic`

#### Patients
*   `GET /clinic/patients/`: List all patients (Subject to PDPA masking).
*   `POST /clinic/patients/`: Register new patient.

#### Uploads (Zero-Trust)
*   `GET /clinic/upload-token/`: **(Critical)** Returns Presigned URL for MinIO.
    *   **Response:** `{ "url": "http://minio:9000/...", "key": "uploads/uuid.jpg" }`
*   `POST /clinic/confirm-upload/`: Link uploaded key to Treatment Session.

### 2. Commerce (`/commerce`)
**Managed by:** `backend-core/commerce`

#### Transactions
*   `POST /commerce/checkout/`: Submit a transaction.
    *   **Triggers:** Async Celery Task `calculate_commission`.

#### Products
*   `GET /commerce/products/`: List active inventory.

---

## Data Models & Schema

### CommissionLog (Async Result)
Generated by the background worker.
```json
{
  "staff_id": 1,
  "amount": 500.00,
  "calculation_details": {
    "rule": "Standard Value (<=100k)",
    "rate": 0.05,
    "split_count": 1
  }
}
```

